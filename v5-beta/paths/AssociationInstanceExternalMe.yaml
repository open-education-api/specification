post:
  summary: POST /associations/external/me
  description: |
    POST a single association enroll a person based on person information obtained from .wellknown endpoint, an offering, 
    and the organization/type=root information form the organization that is issueing this association. 
    The offering can either be identified by an offeringId if known or the full offering details. 
  security:
    - openId:
      - associations.write
  tags:
    - associations

  requestBody:
    required: true
    content:
      application/json:
        schema:
          allOf:
          - $ref: '../schemas/AssociationWrite.yaml'
          - properties:
              organization:
                $ref: '../schemas/Organization.yaml'

  responses:
    '201':
      description: OK
      content:
        application/json:
          schema:
            properties:
              response:
                allOf:
                  - $ref: '../schemas/AssociationId.yaml'
                  - $ref: '../schemas/PostResponse.yaml'

    '400':
      $ref: '../schemas/ErrorBadRequest.yaml'



  # security:
  #   - openId:
  #     - associations:external:me.write
  # tags:
  #   - associations

  # requestBody:
  #   required: true
  #   content:
  #     application/json:
  #       schema:  
  #         type: object
  #         properties:
  #           issuer:
  #             $ref: '../schemas/Organization.yaml'            
  #           association:
  #             $ref: '../schemas/AssociationProperties.yaml'
  #           offering:
  #             oneOf:
  #               - $ref: '../schemas/ComponentOfferingExpanded.yaml'
  #               - $ref: '../schemas/CourseOfferingExpanded.yaml'
  #               - $ref: '../schemas/ProgramOfferingExpanded.yaml'

  # responses:
  #   '201':
  #     description: OK
  #     content:
  #       application/json:
  #         schema:
  #           properties:
  #             response:
  #               allOf:
  #                 - $ref: '../schemas/AssociationId.yaml'
  #                 - $ref: '../schemas/PostResponse.yaml'

  #   '400':
  #     description: Bad Request
  #     content:
  #       application/problem+json:
  #         schema:
  #           $ref: '../schemas/Problem.yaml'