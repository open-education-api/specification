post:
  summary: POST /associations/external
  description: |
    POST a single association enroll a person based on person information included and the complete information on the offering.
  security:
    - openId:
      - associations:external.write
  tags:
    - associations

  requestBody:
    required: true
    content:
      application/json:
        schema:  
          type: object
          properties:
            issuer:
              $ref: '../schemas/Organization.yaml'   
            person:
              $ref: '../schemas/PersonProperties.yaml'           
            associationItem:
              $ref: '../schemas/AssociationProperties.yaml'
            offering:
              oneOf:
                - $ref: '../schemas/ComponentOfferingExpanded.yaml'
                - $ref: '../schemas/CourseOfferingExpanded.yaml'
                - $ref: '../schemas/ProgramOfferingExpanded.yaml'

  responses:
    '201':
      description: OK
      content:
        application/json:
          schema:
            properties:
              response:
                allOf:
                  - $ref: '../schemas/AssociationId.yaml'
                  - $ref: '../schemas/PostResponse.yaml'

    '400':
      description: Bad Request
      content:
        application/problem+json:
          schema:
            $ref: '../schemas/Problem.yaml'