post:
  summary: POST /associations/external/me
  description: |
    POST a single association enroll a person based on person information obtained from .wellknown endpoint and an offering. 
    The offering can either be identified by an offeringId if known or the full offering details. 
  security:
    - openId:
      - my_association_write
  tags:
    - associations

  requestBody:
    required: true
    content:
      application/json:
        schema:  
          type: object
          properties:
            issuer:
              $ref: '../schemas/Organization.yaml'            
            associationItem:
              $ref: '../schemas/AssociationProperties.yaml'
            offering:
              oneOf:
                - $ref: '../schemas/ComponentOfferingExpanded.yaml'
                - $ref: '../schemas/CourseOfferingExpanded.yaml'
                - $ref: '../schemas/ProgramOfferingExpanded.yaml'

  responses:
    '201':
      description: OK
      content:
        application/json:
          schema:
            properties:
              response:
                allOf:
                  - $ref: '../schemas/AssociationId.yaml'
                  - $ref: '../schemas/PostResponse.yaml'

    '400':
      description: Bad Request
      content:
        application/problem+json:
          schema:
            $ref: '../schemas/Problem.yaml'